
# STM32F103C8T6控制的移动目标自动跟踪系统

## 项目简介

本项目设计了一套以STM32F103C8T6为主控的移动目标跟踪与控制系统。树莓派利用OpenCV进行视觉识别，并通过串口与STM32通信，实时传递目标位置数据。STM32控制二维步进电机，根据视觉反馈调整运动路径，实现对目标的稳定跟踪。

## 系统架构

1. **主控单元**  
   - STM32F103C8T6负责接收视觉数据、处理运动控制逻辑，并驱动步进电机。  
   - 通过USART接口接收来自树莓派的目标位置和状态信息。

2. **视觉处理**  
   - 树莓派运行OpenCV，从摄像头采集实时图像并识别目标。  
   - 提取目标坐标后，转化为STM32能够识别的格式，通过串口发送。

3. **运动控制**  
   - STM32根据接收到的目标坐标计算步进电机的运动轨迹。  
   - 精确控制电机运行，使目标始终保持在预定位置。

4. **通信机制**  
   - 数据通过串口传输，采用简单的协议（例如“帧头+数据+校验”）确保通信可靠性。  
   - STM32实时解析收到的指令，做出相应的控制决策。

## 项目特点

- **高性能主控**：STM32F103C8T6提供稳定、低延迟的控制能力。  
- **视觉与运动分离**：树莓派负责计算密集型的图像处理，STM32专注于实时控制，实现模块化分工。  
- **高精度运动**：通过步进电机的精确控制，达到目标位置的高精度跟踪。  
- **可靠通信**：串口通信稳定可靠，确保视觉数据与运动控制指令及时同步。

## 文件结构

- `firmware/`：  
  - STM32代码，包含串口通信解析、运动控制逻辑以及步进电机驱动的实现。  
- `vision/`：  
  - 树莓派的图像处理代码，负责目标检测与数据格式化。  
- `docs/`：  
  - 项目设计说明、协议格式和通信流程的文档。  
- `tests/`：  
  - 测试脚本和工具，用于验证树莓派和STM32之间的通信与控制功能。

## 安装与运行

1. **硬件准备**  
   - STM32F103C8T6最小系统板  
   - 树莓派（建议树莓派4）  
   - 支持树莓派的摄像头模块  
   - 二维步进电机及驱动模块

2. **软件环境**  
   - STM32开发工具链（如Keil或STM32CubeIDE）  
   - 树莓派OS  
   - Python 3.8+  
   - OpenCV 4.5+

3. **运行步骤**  
   - 编译并烧录STM32固件到开发板。  
   - 在树莓派上运行视觉处理代码，确保能够识别目标并输出坐标数据。  
   - 确保STM32与树莓派的串口连接正确。  
   - 启动系统，观察目标识别、数据传输与电机运行的协同效果。

## 贡献与反馈

如果您发现问题或有改进建议，请通过提交Issue或Pull Request的方式与我们联系。我们欢迎社区的参与，共同完善项目功能。
